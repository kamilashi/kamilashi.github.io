---
layout: post
---

<div style="height: 50px;"></div>

This is a small practice project, started for the purpose of learning OpenGL and the basics of engine-less rendering. The idea of an endless jet flight as well as the stylized visuals was inspired by the incredible work of [Calder Moore](https://www.youtube.com/watch?v=9TI_qsgyXe4). The project also features a scope-based profiler (single threaded). For the current state of the source code please visit [this link.](https://github.com/kamilashi/OpenGL-Fun)

<div style="height: 20px;"></div>

<div class="single-video" >
	<video autoplay muted loop >
		<source src="/assets/videos/jetloop_f.mp4?v=6" type="video/mp4">
		Could not load the video
	</video >
</div>

For the profiler, timings are collected into a node tree and traversed with a custom iterator, then the current frame is streamed to an ImGui widget through an exposed interface. Snippets of the implementation are provided below.

<details>
<summary>Profiler header.</summary>
	{% include profiler_h_code.html %}
</details>

<div style="height: 20px;"></div>

<details>
<summary>Profiler's node tree class.</summary>
	{% include profiler_cpp_code.html %}
</details>

<div style="height: 20px;"></div>

Function that assembles the tree text:

```
void getFrame(FrameProfileData* pFrameData)
{
  memset(pFrameData->header, 0, FrameProfileData::headerSize);
  memset(pFrameData->body, 0, FrameProfileData::bodySize);

  snprintf(pFrameData->header, FrameProfileData::headerSize, "Frame %08llu | Duration - real (ms) 
  | - max (ms) | - min (ms) | - avg in %zu fr (ms) | Scope \n", 
  static_cast<unsigned long long>(ScopeTimer::sFrameNumber), ScopeStats::movingAverageWindowSize);

  for (auto it = profileTree.begin(); it != profileTree.end(); it++)
  {
    const ScopeProfileNode& node = *it;
    const ScopeStats& stats = profileTree.getOrCreateStats(node.id);

    formatProfileRowIndented(pFrameData->body, FrameProfileData::bodySize, node.data, stats, it.depth());
  }
}
```

![Profiler Output](/assets/images/jetloop/profiler.png) 

<div style="height: 20px;"></div>

Currently, the terrain generation implements simple Fractal Brownian Motion and [height-gradient based erosion](https://www.youtube.com/watch?v=gsJHzBTPG0Y&list=PLcyvXZtYpSWl_ZhC9r4OMtPv3H5ny13qf&index=72). Below are some screenshots of different configuration presets.

<div style="height: 20px;"></div>

![Patagonia Preset](/assets/images/jetloop/patagonia1.png) 

![Patagonia Preset](/assets/images/jetloop/patagonia2.png) 
*Preset 1*

<div style="height: 20px;"></div>

![Patagonia Preset](/assets/images/jetloop/cappadocia1.png) 

![Patagonia Preset](/assets/images/jetloop/cappadocia2.png) 
*Preset 2*

The jet model is a free [Sketchfab asset](https://sketchfab.com/3d-models/free-fighter-jet-collection-low-poly-cb5966c988d9403895be89b364c2252f).


